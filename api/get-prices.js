// api/get-prices.js (SIMULATOR MODE)
export default async function handler(req, res) {
  const { region, topic } = req.query;

  // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏
  await new Promise(resolve => setTimeout(resolve, 800));

  const dataMap = {
    news: {
      title: "–û–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏",
      content: `* **–ß–µ—Ä–Ω–æ–º–æ—Ä—Å–∫–∏–π —Ä–µ–≥–∏–æ–Ω:** –û–∂–∏–¥–∞–µ—Ç—Å—è —Ä–æ—Å—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ –º–∞—Å–ª–∞.\n* **–ò–Ω–¥–∏—è:** –°–Ω–∏–∂–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–Ω–æ–π –ø–æ—à–ª–∏–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ.\n* **–õ–æ–≥–∏—Å—Ç–∏–∫–∞:** –§—Ä–∞—Ö—Ç –∏–∑ –ø–æ—Ä—Ç–æ–≤ ${region} —Å—Ç–∞–±–∏–ª–µ–Ω.`
    },
    prices: {
      title: "–ö–æ—Ç–∏—Ä–æ–≤–∫–∏ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã",
      content: `| –ü—Ä–æ–¥—É–∫—Ç | –¶–µ–Ω–∞ FOB | –ò–∑–º. –∑–∞ –Ω–µ–¥–µ–ª—é | –ü—Ä–æ–≥–Ω–æ–∑ |\n| :--- | :--- | :--- | :--- |\n| Sun Oil | $945 | +$15 | üìà |\n| Palm Oil | $890 | -$5 | üìâ |\n| Soy Oil | $1010 | +$2 | ‚û°Ô∏è |`
    },
    trade: {
      title: "–≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç",
      content: `–≠–∫—Å–ø–æ—Ä—Ç–Ω—ã–µ –æ—Ç–≥—Ä—É–∑–∫–∏ –∏–∑ —Ä–µ–≥–∏–æ–Ω–∞ **${region}** –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü —Å–æ—Å—Ç–∞–≤–∏–ª–∏ 450 —Ç—ã—Å. —Ç–æ–Ω–Ω. –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –ö–∏—Ç–∞–π (40%), –ï–≥–∏–ø–µ—Ç (25%), –ï–° (15%).`
    },
    policy: {
      title: "–†–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è",
      content: `–í —Ä–µ–≥–∏–æ–Ω–µ **${region}** –≤—Å—Ç—É–ø–∞—é—Ç –≤ —Å–∏–ª—É –Ω–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é 3-MCPD. –≠–∫—Å–ø–æ—Ä—Ç–Ω–∞—è –ø–æ—à–ª–∏–Ω–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ 0% –¥–æ –∫–æ–Ω—Ü–∞ –∫–≤–∞—Ä—Ç–∞–ª–∞.`
    }
  };

  const selected = dataMap[topic] || dataMap.news;

  const finalReport = `
# ${selected.title}: ${region}
---
${selected.content}

> **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.** –î–∞–Ω–Ω—ã–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
  `;

  res.status(200).json({ report: finalReport });
}
